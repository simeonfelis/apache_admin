# Generated by django template bzr.config

{% if shares %}
DavLockDB "/var/run/DavLock/DavLock"

WSGIScriptAliasMatch ^/bzr/.*/\.bzr/smart$ /var/cgi/bzr.wsgi

#The three next lines allow regular GETs to work too
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/bzr/.*/\.bzr/smart$
RewriteRule ^/bzr/(.*/\.bzr/.*)$ /var/www/bzr/$1 [L]

{% for share in shares %}
<Location /{{ share.share.share_type }}/{{ share.share.name }}>
    DAV on
    ForceType text/plain
    Options indexes
    Order Allow,Deny
    Allow from all
    AuthType Digest
    AuthName Login
    AuthDigestDomain /{{ share.share.share_type }}/ https://rfhete470.hs-regensburg.de/{{ share.share.share_type }}/{{ share.share.name }}/ 
    AuthDigestProvider file
    AuthUserFile /etc/apache2/passwd.dav
    AuthUserGroupFile /etc/apache2/groups.dav
    <LimitExcept Options>
        require group {{ share.share.share_type }}_{{ share.share.name|lower|safe }} {# {{ share.projects.0.name|lower }} #} 
    </LimitExcept>
    DirectorySlash Off
    DavDepthInfinity on
</Location>
{% endfor %}
# No bzr shares available
{% endif %}

