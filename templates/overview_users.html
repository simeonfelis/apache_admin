<html>
    <head>
    </head>
    <body>
        <h1>User information</h1>

        <h2>Add user</h2>

        <p>You can add users in <a href="{% url home %}admin/persondb/person/add/">Django's admin interface</a>.</p>

        {% if users %}

        <h2>Active Users</h2>

        <table align="center" border="1" width="75%" >
            <tr>
                <th>Last name</th><th>First Name</th><th>Username</th><th>Member type</th><th>Projects</th><th>Shares</th>
            </tr>
            {% for u in users %} {% if u.is_active %}
            <tr>
                <td><a href="{% url home %}usermod/{{ u.pk }}">{{ u.last_name }}</a></td>
                <td><a href="{% url home %}usermod/{{ u.pk }}">{{ u.first_name }}</a></td>
                <td><a href="{% url home %}usermod/{{ u.pk }}">{{ u.username }}</a></td>
                <td>{{ u.member_set.all.0.get_member_type_display }}</td>
                <td>{% for project in u.member_set.all.0.projects.all %}
                    <a href="{% url home %}projectmod/{{ project.pk }}">{{ project.name }}</a><br />
                    {% endfor %}
                </td>
                <td>{% for project in u.member_set.all.0.projects.all %} {% for share in project.shares.all %}
                    <a href="{% url home %}sharemod/{{ share.pk }}">{{ share }}</a> <br />
                    {% endfor %} {% endfor %}
                </td>
            </tr>
            {% endif %} {% endfor %}
        </table>


        <h2>Expired Users</h2>
        <table align="center" border="1" width="75%" >
            <tr>
                <th>Last name</th><th>First Name</th><th>Username</th><th>Member type</th><th>Projects</th><th>Shares</th>
            </tr>
            {% for u in users %} {% if not u.is_active %}
            <tr>
                <td><a href="{% url home %}usermod/{{ u.pk }}">{{ u.last_name }}</a></td>
                <td><a href="{% url home %}usermod/{{ u.pk }}">{{ u.first_name }}</a></td>
                <td><a href="{% url home %}usermod/{{ u.pk }}">{{ u.username }}</a></td>
                <td>{{ u.member_set.all.0.get_member_type_display }}</td>
                <td>{% for project in u.member_set.all.0.projects.all %}
                    <a href="{% url home %}projectmod/{{ project.pk }}">{{ project.name }}</a><br />
                    {% endfor %}
                </td>
                <td>{% for project in u.member_set.all.0.projects.all %} {% for share in project.shares.all %}
                    <a href="{% url home %}sharemod/{{ share.pk }}">{{ share }}</a> <br />
                    {% endfor %} {% endfor %}
                </td>
            </tr>
            {% endif %} {% endfor %}
        </table>


        {% else %}
        <p>I cannot show you any users at the moment</p>
        <p>Maybe something went wrong</p>
        {% endif %}
        
    </body>
</html>


