{% extends "base.html" %}

{% block header %}

    {% include "header_javascript.html" %}

{% endblock %}


{% block content %}


        <h1>Benutzer Übersicht</h1>

        <p><a class="button" href="{% url home %}useradd">Benutzer hinzufügen</a></p>
        <p>1. Aktive Benutzer</p>
        <p>2. Alumnis</p>
        <p>3. Inaktive</p>

        {% if users %}

        <h2>1. Aktive Benutzer</h2>

        <table align="center" border="1" width="85%" class="ui-widget" >
            <thead>
            <tr class="ui-widget-header">
                <th width="16%">Nachname</th><th width="16%">Vorname</th><th width="10%">Username</th><th width="11%">Bis</th><th width="11%">Member type</th><th>Projekte</th><th width="20%">Freigaben</th>
            </tr>
            </thead>
            <tbody class="ui-widget-content">
                {% for u in users|dictsort:"last_name" %} {% if u.is_active and u.member_set.all|length > 0 and not u.member_set.all.0.member_type == "alumni" %}
                {# all active users, no alumnis, and make sure that no django-only-users (from django User class) are displayed #}
                    {% include "user_tablerow.html" %}
                {% endif %}{# u.is_active #}
                {% endfor %}
            </tbody>
        </table>

        <h2>2. Alumni</h2>
        <table align="center" border="1" width="85%" class="ui-widget" >
            <thead>
            <tr class="ui-widget-header">
                <th width="16%">Nachname</th><th width="16%">Vorname</th><th width="10%">Username</th><th width="11%">Bis</th><th width="11%">Member type</th><th>Projekte</th><th width="20%">Freigaben</th>
            </tr>
            </thead>
            <tbody class=ui-widget-content">
                {% for u in users|dictsort:"last_name" %}{% if u.member_set.all.0.member_type == "alumni" %}
                    {% include "user_tablerow.html" %}
                {% endif %}{% endfor %}
            </tbody>
        </table>



        <h2>3. Inaktive Nutzer</h2>
        <table align="center" border="1" width="85%" >
            <tr>
                <th width="16%">Nachname</th><th width="16%">Vorname</th><th width="10%">Username</th><th width="11%">Bis</th><th width="11%">Member type</th><th>Projekte</th><th width="20%">Freigaben</th>
            </tr>
            <tbody class=ui-widget-content">
                {% for u in users %} {% if not u.is_active and not u.member_set.all.0.member_type == "alumni" %}
                    {% include "user_tablerow.html" %}
                {% endif %}{% endfor %}
            </tbody>
        </table>


        {% else %}
        <p>I cannot show you any users at the moment</p>
        <p>Maybe something went wrong</p>
        {% endif %}
        
{% endblock %}

