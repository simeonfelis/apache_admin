# Generated by django template dav.config

# List available Dav shares
<Location /{{ share.share.share_type }}>
        Options indexes
        Order Allow,Deny
        Allow from all
        AuthType Digest
        AuthName Login
        AuthUserFile /etc/apache2/passwd.dav
        AuthGroupFile /etc/apache2/groups.dav
        <LimitExcept OPTIONS>
                Require valid-user
        </LimitExcept>
</Location>

{% if shares %}
# This ought to be Dav shares
{% for share in shares %}
<Location /{{ share.share.share_type }}/{{ share.share.name }}>
        # Apache wants to deliver index.html or execute php files.
        # You could simply use:

        # ForceType text/plain

        # But I want original file types work (pdf, html, php...)
        # First, we have to overwrite index.html (from the mod.../dir.conf)
        # I hope this is a random string
        DirectoryIndex iaetiem5tha2Eshaoph3eo9pohGeic7hahtae8pahquequahdee
        # And disable the greedy php interpreter
        php_admin_value engine Off

        DAV On
        Options indexes
        Order Allow,Deny
        Allow from all
        AuthType Digest
        AuthName Login
        AuthUserFile /etc/apache2/passwd.dav
        AuthGroupFile /etc/apache2/groups.dav
        <LimitExcept OPTIONS>
                Require group {{ share.share.share_type }}_{{ share.share.name|lower|safe }} {# {{ share.projects.0.name|lower }} #}
        </LimitExcept>
</Location>
{% endfor %}
{% else %}
# No dav shares available!
{% endif %}

